<html>

<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        function getUrlVars() {
            var vars = [], hash;
            var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
            for (var i = 0; i < hashes.length; i++) {
                hash = hashes[i].split('=');
                vars.push(hash[0]);
                vars[hash[0]] = hash[1];
            }
            return vars;
        }
        $(document).ready(function () {
            var vars = getUrlVars();
            $('#receipt_id').html(vars.id)
            $.ajax({
                url: '/api/donation/id/' + vars.id,
                type: 'get',
                contentType: 'application/json',
                success: function (donation) {
                    console.dir("donation")
                    console.dir(donation)
                    $('#donation_date').html(donation[0].donation_date)
                    $('#donation_type').html(donation[0].income_type_id)
                    $('#donation_quantity').html(donation[0].quantity)
                    $('#donation_unit_value').html(donation[0].quantity_value)
                    $('#donation_value').html(donation[0].value)

                    $.ajax({
                        url: '/api/member/id/'+donation[0].member_id,
                        type: 'get',
                        contentType: 'application/json',
                        success: function (member) {
                            console.dir(member)
                            $('#member').html(member[0].name);
                            $('#address').html(member[0].address);
                            $('#phone').html(member[0].phone);
                        },
                    });
                },
            });
            $.ajax({
                url: '/api/income_type/',
                type: 'get',
                contentType: 'application/json',
                success: function (response_data) {
                    income_type = response_data
                    $.each(response_data, function (k, v) {
                        $('#income_type_id').append('<option value="' + v.id + '">' + v.name + '</option>');
                    });
                },
            });
        });
    </script>
</head>

<body>
    <!-- A grey horizontal navbar that becomes vertical on small screens -->
    <nav class="navbar navbar-expand-sm bg-secondary navbar-dark">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="/members">Members</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/kovil">Kovil</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/donations">Donation</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/expenses">Expenses</a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="/reports">Reports</a>
            </li>
        </ul>
    </nav>
    <br />
    <div id="report" class="container center_div">
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />

        <div class="page-content container">
            <div class="page-header text-blue-d2">
                <h1 class="page-title text-secondary-d1">
                    Receipt Number:
                    <small class="page-info">
                        <span id="receipt_id"></span>
                    </small>
                </h1>
            </div>

            <div class="container px-0">
                <div class="row mt-4">
                    <div class="col-12 col-lg-10 offset-lg-1">
                        <div class="row">
                            <div class="col-12">
                                <div class="text-center text-150">
                                    <i class="fa fa-book fa-2x text-success-m2 mr-1"></i>
                                    <span class="text-default-d3">Parvathiamma Kovil</span>
                                </div>
                            </div>
                        </div>
                        <!-- .row -->

                        <hr class="row brc-default-l1 mx-n1 mb-4" />

                        <div class="row">
                            <div class="col-sm-6">
                                <div>
                                    <span class="text-sm text-grey-m2 align-middle">To:</span>
                                    <span class="text-600 text-110 text-blue align-middle" id="member"></span>
                                </div>
                                <div class="text-grey-m2">
                                    <div class="my-1" id="address">  
                                    </div>
                                    <div class="my-1" id="donation_date">  
                                    </div>
                                    <div class="my-1"><i class="fa fa-phone fa-flip-horizontal text-secondary"></i> <b
                                            class="text-600" id="phone"></b></div>
                                </div>
                            </div>
                            <!-- /.col -->
                        </div>
                        <hr class="row brc-default-l1 mx-n1 mb-4" />
                        <div class="mt-4">
                            <div class="row mt-3">
                                <div class="col-12 col-sm-7 text-grey-d2 text-95 mt-2 mt-lg-0">
                                    Donation Details:
                                </div>
                                <div class="col-12 col-sm-5 text-grey text-90 order-first order-sm-last">
                                    <div class="row my-2">
                                        <div class="col-7 text-right">
                                            Type
                                        </div>
                                        <div class="col-5">
                                            <span class="text-120 text-secondary-d1" id="donation_type">$2,250</span>
                                        </div>
                                    </div>
                                    <div class="row my-2">
                                        <div class="col-7 text-right">
                                            Quantity
                                        </div>
                                        <div class="col-5">
                                            <span class="text-120 text-secondary-d1" id="donation_quantity">$2,250</span>
                                        </div>
                                    </div>

                                    <div class="row my-2">
                                        <div class="col-7 text-right">
                                            Unit Value
                                        </div>
                                        <div class="col-5">
                                            <span class="text-110 text-secondary-d1" id="donation_unit_value">$225</span>
                                        </div>
                                    </div>

                                    <div class="row my-2 align-items-center bgc-primary-l3 p-2">
                                        <div class="col-7 text-right">
                                            Total Amount
                                        </div>
                                        <div class="col-5">
                                            <span class="text-150 text-success-d3 opacity-2" id="donation_value">$2,475</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <hr />

                            <div>
                                <span class="text-secondary-d1 text-105">Thank you for your support</span>
                                <a href="#" class="btn btn-info btn-bold px-4 float-right mt-3 mt-lg-0">Print</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>