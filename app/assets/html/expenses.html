<html>

<head>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script>
    var expense_type;
    $(document).ready(function () {
      $.ajax({
        url: '/api/expense_type/',
        type: 'get',
        contentType: 'application/json',
        success: function (response_data) {
          console.dir(response_data)
          expense_type = response_data;
        },
      });
      $('#example').DataTable({
        "ajax": {
          "url": "api/expenses",
          dataSrc: ""
        },
        "columns": [
          { "data": "id" },
          {
            "data": "type_id",
            render: function (id, type, row, meta) {
              for (i = 0; i < expense_type.length; i++) {
                if (id == expense_type[i]['id']) {
                  return expense_type[i]['name']
                }
              }
            }
          },
          { "data": "receipt" },
          { "data": "value" },
          { "data": "description" },
          {
            data: null,
            render: function (data, type, row, meta) {
              return '<a href="edit_expense?id=' + data['id'] + '" class="btn btn-info">Edit</a>'
            }
          },
        ]
      });
    });
  </script>
</head>

<body onload="loadMembers()">
  <!-- A grey horizontal navbar that becomes vertical on small screens -->
  <nav class="navbar navbar-expand-sm bg-secondary navbar-dark">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/members">Members</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/add-donation-parvathiamman">Parvathiamman Kovil Vari</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/add-donation-ayyan">Ayyan Kovil Vari</a>
      </li>
      <li class="nav-item active">
        <a class="nav-link" href="/expenses">Expenses</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/reports">Reports</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/expense_report">Expense Report</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="/balance">Balance Sheet</a>
  </li>
    </ul>
  </nav>
  <br />
  <div class="container center_div">
    <table id="example" class="display" style="width:100%">
      <thead>
        <tr>
          <th>ID</th>
          <th>Type</th>
          <th>Receipt</th>
          <th>Value</th>
          <th>Description</th>
          <th></th>
  </div>
  </tr>
  </thead>
  </table>
  <a href="add_expense" class="btn btn-info" role="button">Add Expense</a>
  <a href="add_expense_type" class="btn btn-info" role="button">Add Expense Type</a>
  </div>
  <script>
    function w3_open() {
      document.getElementsByClassName("w3-sidenav")[0].style.display = "block";
    }
    function w3_close() {
      document.getElementsByClassName("w3-sidenav")[0].style.display = "none";
    }
  </script>
</body>

</html>